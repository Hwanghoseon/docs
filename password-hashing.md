# 패스워드 암호화 기능

## 1. 개요: 패스워드 암호화 필요성

패스워드는 민감한 정보. 데이터베이스 유출 시 심각한 보안 사고를 방지하기 위해 반드시 암호화하여 저장

## 2. 암호화 방식 : 단방향 암호화 vs 양방향 암호화

| 구분             | 단방향 암호화 (Hashing)                                                                 | 양방향 암호화 (Encryption)                                                                    |
| :--------------- | :-------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------- |
| **개념**         | 원본 데이터를 암호화하지만, **복호화(원상 복구)가 불가능한** 방식                       | 암호화된 데이터를 **키(Key)를 이용하여 다시 원본 데이터로 되돌릴 수 있는(복호화 가능한)** 방식|
| **특징**         | - 단방향성: 복호화 불가<br>- 고정 길이 출력: 항상 동일 길이의 해시 값<br>- 결정론적: 동일 입력 시 항상 동일 해시 값<br>- 눈사태 효과: 작은 변화에도 해시 값 완전 다름<br>- 충돌 저항성: 동일 해시 값 생성 확률 극히 낮음 | - 복호화 가능: 키만 있으면 복원 가능<br>- 기밀성 보장: 데이터 숨김<br>- 두 방식: 대칭키(동일 키, 빠름), 비대칭키(다른 키 쌍, 느림, 키 교환/인증) |
| **장점**         | - **비밀번호 저장에 최적**: DB 유출 시 실제 비밀번호 보호<br>- 데이터 무결성 검증 (변조 확인)                   | - **원본 데이터 복구 필요 시 사용**<br>- 빠른 암복호화 (대칭키)<br>- 안전한 키 교환/인증 (비대칭키)                                                                                                                                                                                                                                                                                                                                                          |
| **단점**         | - 복호화 불가능: 원본 데이터 되돌릴 수 없음<br>- 암호화 속도: bcrypt 등은 의도적으로 느림                       | - **키(Key) 관리의 어려움/위험**<br>- 비밀번호 저장에 부적합 (키 유출 시 치명적)<br>- 느린 속도 (비대칭키)                                                                                                                                                                                                                                                                                                   |

## 3. 패스워드 암호화에 단방향 암호화(Hashing)를 더 많이 쓰는 이유

비밀번호를 저장하고 검증하는 데는 단방향 암호화(Hashing) 방식이 **압도적으로 많이 사용되며, 필수적인 방법**

*   **최고의 보안성**: 복호화가 불가능하다는 점이 가장 중요. 해커가 해시된 비밀번호를 가져가더라도 실제 비밀번호는 알아낼 수 없어 사용자의 개인정보를 강력하게 보호
*   **복원 불필요**: 시스템은 비밀번호 자체를 알 필요 없이, 단지 '입력된 비밀번호가 올바른지'만 검증. 해시 값 비교만으로 충분
*   **키 관리 위험 제거**: 양방향 암호화처럼 복호화 키를 관리할 필요가 없어 키 유출로 인한 대규모 비밀번호 노출 위험이 없음

## 4. SHA-256 기반 단방향 해싱 구현

비밀번호 암호화를 위해 **SHA-256** 알고리즘을 사용한 단방향 해싱 방식을 구현

### 4.1. SHA-256 이란?

*   **SHA-256 (Secure Hash Algorithm 256-bit)**은 SHA-2 계열에 속하는 단방향 해시 함수
*   어떤 길이의 입력 데이터를 받든 **항상 256비트 (64자리의 16진수 문자열) 길이의 고정된 해시 값**을 출력
*   **보안성**: 입력값의 작은 변화에도 해시 값이 완전히 달라지는 **'눈사태 효과'**와 서로 다른 입력이 동일 해시 값을 생성할 확률이 극히 낮은 **'충돌 저항성'**을 가짐

### 4.2. 구현된 SHA-256 해싱의 작동 원리

현재 구현된 방식은 `EncryptUtill` 클래스의 `encryptSHA` 메서드를 통해 이루어짐

1.  **고정 키(Pepper) 추가**: 사용자가 입력한 평문 비밀번호에 `PropertyConfig`에서 설정된 `shaKey` (예: `mySecretStaticKey_`)라는 **고정된 키(Pepper)**를 앞에 붙여서 사용 (예: `shaKey + 사용자입력비밀번호`)
2.  **SHA-256 해싱**: 이렇게 결합된 문자열을 SHA-256 알고리즘을 사용하여 해싱
3.  **해시 값 저장**: 생성된 256비트 해시 값(16진수 64자리 문자열)이 데이터베이스의 `empPwd` 컬럼에 저장

## 5. 민감 정보(주민등록번호 등) 양방향 암호화

비밀번호와는 달리, **원본 데이터의 복원이 반드시 필요한 민감 정보** (예: 주민등록번호, 계좌번호, 이메일 주소, 신용카드 번호 등)는 양방향 암호화를 사용

### 5.1. 개요: 양방향 암호화의 필요성

*   **목표**: 데이터의 **기밀성** (Confidentiality) 보장. 허가되지 않은 사용자나 시스템으로부터 데이터를 보호
*   **활용**: 시스템이 사용자의 주민등록번호를 확인하거나, 특정 결제를 위해 신용카드 번호를 읽어야 하는 경우 등에 사용

### 5.2. 대표적인 양방향 암호화 방식: AES-256

*   **AES (Advanced Encryption Standard)**는 미국 표준 기술 연구소(NIST)에 의해 채택된 대칭키 암호화 알고리즘으로, 전 세계적으로 가장 널리 사용되고 안전하다고 평가받는 표준 암호화 방식
*   **AES-256**: 256비트의 암호화 키를 사용하여 데이터를 암호화/복호화. 키 길이가 길수록 더 강력한 보안 강도를 가짐
*   **작동 원리**:
    *   **대칭키 암호화**: 암호화와 복호화에 **동일한 키**를 사용. 이 키가 안전하게 관리되는 것이 보안의 핵심
    *   **초기화 벡터 (Initialization Vector, IV)**: 동일한 평문이 암호화될 때 항상 동일한 암호문이 생성되는 것을 방지하기 위해 사용되는 무작위 값. IV는 암호문과 함께 저장되거나 전송되어야 하며, 매 암호화마다 새로 생성하는 것이 보안상 권장
    *   원본 데이터(평문)를 AES 키와 IV를 사용하여 암호화하고, 암호화된 데이터(암호문)를 동일한 AES 키와 IV를 사용하여 원본 데이터로 복호화
